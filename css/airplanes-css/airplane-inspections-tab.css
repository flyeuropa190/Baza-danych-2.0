/* plane-inspections-tab.css */
/* Stylizacja zakładki "Przeglądy Planowane" oraz popupa szczegółów */

/* =========================================
   1. KONFIGURACJA KOLORÓW (STATUSY I TYPY)
   ========================================= */
:root {
    /* Statusy Przeglądów (Sztywne kolory dla spójności) */
    --status-w-trakcie: #3498db;      /* Niebieski */
    --status-zaplanowany: #bdc3c7;    /* Szary (Neutralny) */
    --status-wykonany: #2ecc71;       /* Zielony */
    --status-przygotowany: #9b59b6;   /* Fioletowy */
    --status-problem: #c0392b;        /* Czerwony */
    --status-przelozony: #f39c12;     /* Pomarańczowy */
    --status-default: #7f8c8d;

    /* Typy Przeglądów */
    --type-b: #2c3e50;
    --type-c: #27ae60;
    --type-d: #e74c3c;
    --type-default: #95a5a6;

    /* Inne */
    --color-changed: #e67e22;
    --color-delay: #e74c3c;
}

/* Nadpisanie koloru statusu zaplanowanego w jasnym trybie dla kontrastu */
html:not(.dark-mode) {
    --status-zaplanowany: #95a5a6; 
}


/* =========================================
   2. GŁÓWNY LAYOUT LISTY (GRID)
   ========================================= */

#tab-inspections-wrapper {
    width: 100%;
    padding-top: 5px;
}

.inspections-layout {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

/* --- TOOLBAR --- */
.insp-toolbar {
    background: var(--card-bg-local, rgba(255,255,255,0.03));
    border: 1px solid var(--card-border-local, rgba(128,128,128,0.2));
    border-radius: 8px;
    padding: 10px 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.insp-toolbar-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 15px;
}

.insp-toolbar-row.main {
    padding-bottom: 8px;
    border-bottom: 1px solid var(--card-border-local, rgba(128,128,128,0.1));
}

/* Elementy Toolbara */
.insp-search-box {
    position: relative;
    flex: 1;
    min-width: 200px;
}
.insp-search-box input {
    width: 100%;
    background: rgba(0,0,0,0.2);
    border: 1px solid var(--card-border-local, #555);
    color: var(--modal-text, #eee);
    padding: 8px 12px 8px 35px;
    border-radius: 6px;
    font-family: inherit;
    font-size: 0.9rem;
}
.insp-search-box i {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #888;
}

.insp-filter-group {
    display: flex;
    gap: 10px;
}

/* Poprawa czytelności selectów w ciemnym motywie */
.insp-select {
    background-color: #2d3748 !important; /* Ciemne tło */
    color: #f7fafc !important;           /* Jasny tekst */
    border: 1px solid #4a5568 !important;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
}

.insp-select option {
    background-color: #1a202c; /* Tło rozwijanej listy */
    color: #f7fafc;            /* Kolor tekstu opcji */
}

.insp-sort-group {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: auto;
}

.sort-label { font-size: 0.8rem; opacity: 0.7; }

.btn-insp-tool {
    background: rgba(255,255,255,0.1);
    border: none;
    color: var(--modal-text, #eee);
    width: 32px;
    height: 32px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}
.btn-insp-tool:hover { background: rgba(255,255,255,0.2); }

/* Drugi rząd toolbara */
.insp-date-group {
    display: flex;
    align-items: center;
    gap: 5px;
    background: rgba(0,0,0,0.1);
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid var(--card-border-local, #444);
}
.insp-date-input {
    background: transparent;
    border: none;
    color: var(--modal-text, #eee);
    font-family: inherit;
    font-size: 0.8rem;
    width: auto;
    color-scheme: dark; /* Wymusza ciemny kalendarz w przeglądarkach wspierających */
}
.date-sep { opacity: 0.5; margin: 0 5px; }
.date-label-sm { font-size: 0.75rem; opacity: 0.6; text-transform: uppercase; }

.insp-checkbox-group {
    display: flex;
    gap: 15px;
    align-items: center;
}
.insp-checkbox {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    user-select: none;
}
.insp-checkbox input { accent-color: var(--status-w-trakcie); cursor: pointer; }

/* Przyciski akcji (Raport, Wyczyść) */
.insp-actions {
    margin-left: auto; 
    display: flex;
    gap: 10px;
}

.btn-insp-report {
    background: #27ae60;
    color: white;
    border: none;
    padding: 5px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: 0.2s;
    font-weight: 600;
}
.btn-insp-report:hover { background: #2ecc71; }

.btn-insp-clear {
    background: transparent;
    border: 1px solid #e74c3c;
    color: #e74c3c;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: 0.2s;
}
.btn-insp-clear:hover { background: #e74c3c; color: white; }

.insp-empty-state {
    text-align: center;
    padding: 30px;
    opacity: 0.6;
    font-style: italic;
    background: rgba(0,0,0,0.1);
    border-radius: 8px;
}

/* --- EXISTING STYLES BELOW --- */

.inspections-list-container {
    display: flex;
    flex-direction: column;
    gap: 10px; 
}

/* Nagłówek Tabeli */
.insp-grid-header {
    display: grid;
    grid-template-columns: 70px 2fr 1.5fr 140px;
    gap: 15px;
    padding: 0 15px 8px 15px;
    border-bottom: 2px solid var(--card-border-local, rgba(128, 128, 128, 0.2));
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    color: var(--modal-text, inherit);
    opacity: 0.6;
}

.insp-grid-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 500px;
    overflow-y: auto;
    padding-right: 5px; /* miejsce na scrollbar */
}

/* Styl Scrollbara dla grid-body */
.insp-grid-body::-webkit-scrollbar { width: 6px; }
.insp-grid-body::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
.insp-grid-body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }


/* Wiersz (Karta Przeglądu) */
.insp-row {
    display: grid;
    grid-template-columns: 70px 2fr 1.5fr 140px;
    gap: 15px;
    align-items: center;

    background: var(--card-bg-local, rgba(255, 255, 255, 0.05));
    color: var(--modal-text, inherit);
    border: 1px solid var(--card-border-local, rgba(128, 128, 128, 0.2));
    
    /* Lewy pasek - szerokość i styl */
    border-left: 6px solid transparent; 
    
    border-radius: 6px;
    padding: 12px 15px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
}

.insp-row:hover {
    transform: translateX(5px);
    background: rgba(128, 128, 128, 0.1);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* --- ELEMENTY WIERSZA --- */

/* Typ Badge */
.insp-type-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 45px;
    height: 45px;
    border-radius: 8px;
    font-weight: 800;
    color: #fff;
    background-color: var(--type-default);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.insp-type-badge.type-b { background-color: var(--type-b); }
.insp-type-badge.type-c { background-color: var(--type-c); }
.insp-type-badge.type-d { background-color: var(--type-d); }

/* Daty */
.col-dates {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.date-row { font-size: 0.9rem; }
.date-label { 
    font-size: 0.7rem; 
    opacity: 0.6; 
    text-transform: uppercase; 
    margin-right: 5px; 
}
.date-val { font-weight: 500; }
.date-changed { color: var(--color-changed); font-weight: 700; }
.date-original { text-decoration: line-through; opacity: 0.5; font-size: 0.8em; margin-left: 5px; }


/* Responsywność Toolbara */
@media (max-width: 768px) {
    .insp-toolbar-row { flex-direction: column; align-items: stretch; gap: 10px; }
    .insp-sort-group, .insp-actions { margin-left: 0; justify-content: space-between; }
    .insp-checkbox-group { justify-content: space-between; }
    .insp-filter-group { flex-direction: column; }
    .insp-date-group { justify-content: space-between; }
}



/* Szczegóły (Delay / Info) */
.col-details {
    display: flex;
    flex-direction: column;
    gap: 5px;
    font-size: 0.85rem;
}

.badge-delay {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    color: var(--color-delay);
    font-weight: 700;
    font-size: 0.85rem;
    background: rgba(231, 76, 60, 0.1);
    padding: 4px 8px;
    border-radius: 4px;
}

.info-snippet {
    color: var(--text-muted); /* Fallback jeśli zmienna nie istnieje */
    opacity: 0.7;
    font-style: italic;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

/* Status i Badge SZ */
.col-status {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 5px;
}

.status-pill {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
    text-align: center;
    min-width: 90px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    white-space: nowrap;
}

/* Kolorowanie statusów */
.status-pill.s-w-trakcie    { background-color: var(--status-w-trakcie); }
.status-pill.s-zaplanowany  { background-color: var(--status-zaplanowany); color: #444; }
.status-pill.s-wykonany     { background-color: var(--status-wykonany); }
.status-pill.s-przygotowany { background-color: var(--status-przygotowany); }
.status-pill.s-problem      { background-color: var(--status-problem); }
.status-pill.s-przelozony   { background-color: var(--status-przelozony); }
.status-pill.s-default      { background-color: var(--status-default); }

.status-zalegly {
    background: var(--danger-color);
    color: white;
    animation: pulse-red-soft 2s infinite;
}

.sz-badge {
    font-size: 0.7rem;
    background: #444; /* Domyślny ciemny */
    color: #fff;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 600;
}
.badge-sz { /* Alternatywna klasa używana w popupie */
    font-size: 0.7rem;
    color: #fff;
    background: #9b59b6;
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: 600;
    text-transform: uppercase;
    display: inline-block;
}



/* =========================================
   3. MODAL SZCZEGÓŁÓW (POPUP)
   ========================================= */

.details-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s forwards;
}

.details-popup {
    background: var(--modal-bg, #2b2b2b);
    color: var(--modal-text, #eee);
    width: 95%;
    max-width: 700px;
    max-height: 90vh;
    border-radius: 12px;
    border: 1px solid var(--card-border-local, #444);
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: slideUp 0.3s forwards;
}

.details-header {
    padding: 15px 20px;
    background: rgba(0,0,0,0.1);
    border-bottom: 1px solid var(--card-border-local, #444);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.details-header h3 { margin: 0; font-size: 1.1rem; }
.close-popup { font-size: 1.5rem; cursor: pointer; opacity: 0.7; }
.close-popup:hover { opacity: 1; color: var(--color-delay); }

.details-body-scroll {
    padding: 20px;
    overflow-y: auto;
}

.details-top-bar {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--card-border-local, #444);
}

/* Grid wewnątrz modala popupa */
.details-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.detail-group {
    background: var(--card-bg-local, rgba(255,255,255,0.05));
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--card-border-local, #444);
}

.detail-group h4 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 0.85rem;
    text-transform: uppercase;
    opacity: 0.5;
    border-bottom: 1px solid var(--card-border-local, #444);
    padding-bottom: 5px;
}

.d-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-size: 0.9rem;
    padding-bottom: 4px;
    border-bottom: 1px dashed var(--card-border-local, #444);
}
.d-row:last-child { border-bottom: none; }

.d-label { opacity: 0.7; }
.d-value { font-weight: 600; text-align: right; }
.val-changed { color: var(--color-changed); }

.bool-true { color: var(--status-wykonany); font-weight: bold; }
.bool-false { color: var(--status-problem); opacity: 0.8; }

.detail-desc-box {
    background: rgba(128, 128, 128, 0.05);
    padding: 15px;
    border-radius: 8px;
    font-size: 0.9rem;
    line-height: 1.5;
    border-left: 4px solid var(--status-default);
}

/* --- ANIMACJE --- */
@keyframes slideUp { 
    from { transform: translateY(20px); opacity: 0; } 
    to { transform: translateY(0); opacity: 1; } 
}
@keyframes pulse-red-soft {
    0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.4); }
    70% { box-shadow: 0 0 0 6px rgba(231, 76, 60, 0); }
    100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

/* --- RESPONSYWNOŚĆ TABELI --- */
@media (max-width: 768px) {
    .insp-grid-header { display: none; }

    .insp-row {
        grid-template-columns: auto 1fr;
        grid-template-areas:
            "badge dates"
            "badge status"
            "details details";
        gap: 10px;
        padding: 15px;
    }

    .insp-type-badge {
        grid-area: badge;
        width: 50px;
        height: 50px;
        font-size: 1.4rem;
        align-self: start;
    }

    .col-dates { grid-area: dates; }
    
    .col-status { 
        grid-area: status; 
        align-items: flex-start; 
        flex-direction: row;
        flex-wrap: wrap;
    }
    .status-pill { width: auto; }
    
    .col-details { 
        grid-area: details; 
        border-top: 1px solid var(--card-border-local);
        padding-top: 8px;
        margin-top: 5px;
    }
}